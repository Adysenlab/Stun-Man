<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Stun Server: Stun-Man</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stun Server
   &#160;<span id="projectnumber">Compliant with the latest RFCs including 5389, 5769, and 5780</span>
   </div>
   <div id="projectbrief">discover the local host&#39;s own external IP address</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Stun-Man </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>discover the local host's own external IP address, obtain a port mapping, and optionally discover properties of the Network Address Translator (NAT) between two communicating parties</p>
<p>STUNTMAN - An open source STUN server Version 1.2.13 </p><h2>Mar 12, 2017 </h2>
<p>Features:</p>
<p>Compliant with the latest RFCs including 5389, 5769, and 5780. Also includes backwards compatibility for RFC 3489.</p>
<p>Supports both UDP and TCP on both IPv4 and IPv6.</p>
<p>Client test app provided.</p>
<p>Stun server can operate in "full" mode as well as "basic" mode. Basic mode configures the server to listen on one port and respond to STUN binding requests. Full mode configures the service to listen on two different IP address interfaces (if available) and provide NAT behavior and filtering detection support for clients.</p>
<p>Support for running a full mode STUN service on an Amazon EC2 instance. Run "stunserver --help" for visit www.stunprotocol.org on how to configure this mode.</p>
<h2>Open source Apache license. See LICENSE file fore more details. </h2>
<p>Known issues:</p>
<p>TLS mode has yet to be implemented.</p>
<p>Server does not honor the stun padding attribute. If someone really wants this support, let me know and I will consider adding it.</p>
<p>By default, the stun server operates in an open mode without performing authentication. All the code for authentication, challenge-response, message hashing, and message integrity attributes are fully coded. HMAC/SHA1/MD5 hashing code for generating and validating the message integrity attribute has been implemented and tested. However, the code for validating a username or looking up a password is outside the scope of this release. Instead, hooks are provided for implementors to write their own code to validate a username, fetch a password, and allow/deny a request. Details of writing your own authentication provider code are described in the file "server/sampleauthprovider.h".</p>
<p>Dependency checking is not implemented in the Makefile. So if you need to recompile, I recommend "make clean" from the root to preceed any subsequent "make" call.</p>
<p>If you run an instance of stunserver locally, you may observe that "stunclient localhost" may not successfully work. This is because the server is not listening on the loopback adapter when running in full mode. The workaround is to specify the actual IP address that the server is listening on. Type "ifconfig" to discover your IP address (e.g. 10.11.12.13) followed </p><h2>by "stunclient 10.11.12.13" </h2>
<p>Testing:</p>
<p>Fedora 15 with gcc/g++ 4.6.0 Fedora 17 with gcc/g++ 4.72 Ubuntu 11 with gcc/g++ 4.5.2 Ubuntu 12 with gcc/g++ 4.6.3 Ubuntu 12 with clang/clang++ 3.0 Amazon AWS with gcc/g++ 4.4 MacOS with XCode 7 and command line tools FreeBSD 9.0 with gcc/g++ 4.2.1 Solaris 11 with gcc/g++ 4.5.2</p>
<h2>Parsing code has been fuzz tested with zzuf. <a href="http://caca.zoy.org/wiki/zzuf">http://caca.zoy.org/wiki/zzuf</a> </h2>
<p>Prerequisites before compiling and running.</p>
<p>The short summary is that you need a C++ compiler (g++ preferred or clang++), GNU make, Boost header files, and the OpenSSL development files in order to compile the code. Below are the set of package installer commands that you can type from the command line to get the tools and libraries you need.</p>
<p>Debian/Ubuntu/Mint sudo apt-get install g++ sudo apt-get install make sudo apt-get install libboost-dev # For Boost sudo apt-get install libssl-dev # For OpenSSL</p>
<p>RedHat/Fedora and EC2 Amazon Linux AMI sudo yum groupinstall "Development Tools" # For g++, make, et. al. sudo yum install boost-devel # For Boost sudo yum install openssl-devel # For OpenSSL</p>
<p>Solaris and Mac OpenSSL is already installed on Solaris and is not needed on Mac.</p>
<p>Install Boost locally as per instructions below, then uncomment and edit the top line of the <a class="el" href="da/d5e/common_8inc.html">common.inc</a> file.</p>
<p>Manual Boost install The compiled Boost runtime is not necessary. Just obtaining and unpacking the Boost source code distribution from www.boost.org will suffice. If you do not have the adminstrative privaleges to install the Boost distribution into a standard system include path, you may uncomment and edit the top line of the <a class="el" href="da/d5e/common_8inc.html">common.inc</a> file for the BOOST_INCLUDE variable. The <a class="el" href="da/d5e/common_8inc.html">common.inc</a> file is in the same folder as this README file.</p>
<p>Manual OpenSSL install You can obtain the OpenSSL development files and runtime from www.openssl.org. On most systems with development tools already installed, OpenSSL include files are already installed in the standard include path. If this is not the case, you can uncomment and edit the <a class="el" href="da/d5e/common_8inc.html">common.inc</a> file to have the OPENSSL_INCLUDE variable defined.</p>
<p>Other prerequisites pthreads and perl. I've never come across a system where this wasn't already pre-installed. </p><hr/>
<p>Compiling and running</p>
<p>Got Boost and OpenSSL taken care of as described above? Good. Just type "make" (or "gmake" on some systems). There will be three resulting binaries in the root of the source code package produced.</p>
<p>stuntestcode - This is the unit test code. I highly recommend you run this program first. When run, you'll see a series of lines being printed in regards to different code paths being tested. If you see any line that ends in "FAIL", we likely have a bug. Please contact me immediately if you see this.</p>
<p>stunserver - this is the server binary. Run "./stunserver --help" for details on running this program. Running this program without any command line arguments defaults to listening on port 3478 on all adapters.</p>
<p>stunclient - this is the client test binary. Run "./stunclient --help" for </p><h2>details on running this program. Example: "./stunclient stun.selbie.com" </h2>
<p>Firewall</p>
<p>Don't forget to configure your firewall to allow traffic for the local ports the stunserver will be listening on! </p><hr/>
<p>Feature roadmap (the features I want to implement in a subsequent release)</p>
<p>Cleanup Makefile and add "configure" and autotools support</p>
<p>Finish Windows port and able to run as a Windows service</p>
<p>Scale across more than one CPU (for multi-core and multi-proc machines). The threading code has already been written, just needs some finish work.</p>
<p>TLS support </p><hr/>
<p>Contact the author</p>
<p>John Selbie <a href="#" onclick="location.href='mai'+'lto:'+'joh'+'n@'+'sel'+'bi'+'e.c'+'om'; return false;">john@<span style="display: none;">.nosp@m.</span>selb<span style="display: none;">.nosp@m.</span>ie.co<span style="display: none;">.nosp@m.</span>m</a></p>
<hr/>
<p>Current maintainer for the codebase</p>
<p>Aditya Sen <a href="#" onclick="location.href='mai'+'lto:'+'ady'+'se'+'nla'+'b@'+'gma'+'il'+'.co'+'m'; return false;">adyse<span style="display: none;">.nosp@m.</span>nlab<span style="display: none;">.nosp@m.</span>@gmai<span style="display: none;">.nosp@m.</span>l.co<span style="display: none;">.nosp@m.</span>m</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
