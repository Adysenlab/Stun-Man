<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Stun Server: stunserver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stun Server
   &#160;<span id="projectnumber">Compliant with the latest RFCs including 5389, 5769, and 5780</span>
   </div>
   <div id="projectbrief">discover the local host&#39;s own external IP address</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_resources_stunserver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">stunserver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>% STUNSERVER(1) January 22, 2012 | User Manual</p>
<h1>NAME</h1>
<p>stunserver - STUN protocol service (RFCs: 3489, 5389, 5789, 5780)</p>
<h1>SYNOPSIS</h1>
<p><b>stunserver</b> [OPTIONS]</p>
<p>#DESCRIPTION</p>
<p>stunserver starts a STUN listening service that responds to STUN binding requests from remote clients. Options are described below.</p>
<h1>OPTIONS</h1>
<p>The following options are supported. </p><pre class="fragment">--mode MODE
--primaryinterface INTERFACE
--altinterface INTERFACE
--primaryport PORTNUMBER
--altport PORTNUMBER
--family IPVERSION
--protocol PROTO
--maxconn MAXCONN
--verbosity LOGLEVEL
--ddp
--primaryadvertised
--altadvertised
--configfile
--help
</pre><p>Details of each option are as follows.</p>
<p>**&ndash;mode** MODE</p>
<p>Where the MODE parameter specified is either "basic" or "full". In basic mode, the server listens on a single port. Basic mode is sufficient for basic NAT traversal scenarios in which a client needs to discover its external IP address and obtain a port mapping for a local port it is listening on. The STUN CHANGE-REQUEST attribute is not supported in basic mode.</p>
<p>In full mode, the STUN service listens on two different interfaces and two different ports on each. A client binding request may specify an option for the server to send the response back from one of the alternate interfaces and/or ports. Full mode facilitates clients attempting to discover NAT behavior and NAT filtering behavior of the network they are on. Full mode requires two unique IP addresses on the host. When run over TCP, the service is not able to support a CHANGE-REQUEST attribute from the client.</p>
<p>If this parameter is not specified, basic mode is the default.</p>
<hr/>
<p>**&ndash;primaryinterface** INTERFACE</p>
<p>Where INTERFACE specified is either a local IP address (e.g. "192.168.1.2") of the host or the name of a network interface (e.g. "eth0").</p>
<p>The interface or address specified will be used by the service as the primary listening address.</p>
<p>In basic mode, the default is to bind to all available adapters (INADDR_ANY). In full mode, the default is to bind to the first non-localhost adapter with a configured IP address.</p>
<hr/>
<p>**&ndash;altinterface** INTERFACE</p>
<p>Where INTERFACE specified is either a local IP address (e.g. "192.168.1.3") of the host or the name of a network interface (e.g. "eth1").</p>
<p>This parameter is nearly identical as the &ndash;primaryinterface option except that it specifies the alternate listening address for full mode.</p>
<p>This option is ignored in basic mode. In full mode, the default is to bind to the second non-localhost adapter with a configured IP address.</p>
<hr/>
<p>**&ndash;primaryport** PORTNUM</p>
<p>Where PORTNUM is a value between 1 to 65535.</p>
<p>This is the primary port the server will bind to for listening for incoming binding requests. The service will bind both the primary address and the alternate address to this port.</p>
<p>The default is 3478.</p>
<hr/>
<p>**&ndash;altport** PORTNUM</p>
<p>Where PORTNUM is a value between 1 to 65535.</p>
<p>This is the alternate port the server will bind to for listening for incoming binding requests. The service will bind both the primary address and the alternate address to this port.</p>
<p>This option is ignored in basic mode. The default is 3479.</p>
<hr/>
<p>**&ndash;family** IPVERSION</p>
<p>Where IPVERSION is either "4" or "6" to specify the usage of IPV4 or IPV6.</p>
<p>The default family is 4 for IPv4 usage.</p>
<hr/>
<p>**&ndash;protocol** PROTO</p>
<p>Where PROTO is either IP protocol, "udp" or "tcp".</p>
<p>udp is the default.</p>
<hr/>
<p>**&ndash;maxconn** MAXCONN</p>
<p>Where MAXCONN is a value between 1 and 100000.</p>
<p>For TCP mode, this parameter specifies the maximum number of simultaneous connections that can exist at any given time.</p>
<p>This parameter is ignored when the protocol is UDP. The default value is 1000</p>
<hr/>
<p>**&ndash;verbosity** LOGLEVEL</p>
<p>Where LOGLEVEL is a value greater than or equal to 0.</p>
<p>This parameter specifies how much is printed to the console with regards to initialization, errors, and network activity. A value of 0 specifies a very minimal amount of output. A value of 1 shows slightly more. A value of 2 shows even more. Specifying 3 will show a lot more.</p>
<p>The default is 0.</p>
<hr/>
<p>**&ndash;ddp**</p>
<p>The &ndash;ddp switch is for "Distributed Denial (of service) Protection". Any client IP address that floods the service with too many packets in a short interval is put into a "penalty box" that will result in subsequent packets received from this IP to be dropped. The result is that the client receives no response.</p>
<hr/>
<p>**&ndash;primaryadvertised** PRIMARY-IP</p>
<p>**&ndash;altadvertised** ALT-IP</p>
<p>Where PRIMARY-IP and ALT-IP are valid numeric IP address strings (e.g. "101.23.45.67") that are the public IP addresses of the &ndash;primaryinterface and &ndash;altinterface addresses discussed above.</p>
<p>These two parameters are for advanced usage only. It is intended for support of running a STUN server in full mode on Amazon EC2 or other hosted environment where the server is running behind a NAT. Do not set this parameter unless you know specifically the effect it creates.</p>
<p>Normally, without these parameters being set, the ORIGIN attribute, OTHER-ADDRESS attribute, and CHANGED-ADDRESS attributes are are determined by querying the local adapters or sockets for the IP address they are listening on. When running the server in a NAT environment, binding responses will still contain a correct set of mapping address attributes, such that P2P connectivity may succeed. However, the the ORIGIN, OTHER-ADDRESS, and CHANGED-ADDRESS attributes sent by the server will be incorrect. The impact of sending an incorrect OTHER-ADDRESS or CHANGED-ADDRESS will result in a client attempting to do NAT Behavior tests or NAT filtering tests to report an incorrect result.</p>
<p>For more details, visit www.stunprotocol.org for details on how to correctly set these parameters for use within Amazon EC2.</p>
<hr/>
<p>**&ndash;configfile** FILENAME</p>
<p>The &ndash;configfile switch allows the server to be configured with a JSON configuration file rather that through command line parameters. If this switch is specified, most other command line parameters will be ignored. (&ndash;verbosity is the only one honored). Instead of configuring the server with command line parameters, the configuration will be read from file. Since multiple configurations can be specified, this has the added advantage of allowing multiple protocols and IP families to run within the same process (each in a separate thread). The fields of each configuration node are named identical to the corresponding command line parameters (with the leading dashes removed). An example stun.conf configuration file is shipped in the "testcode" folder of the source package</p>
<hr/>
<p>**&ndash;help**</p>
<p>Prints this help page</p>
<h1>EXAMPLES</h1>
<p>stunserver : With no options, starts a basic STUN binding service on UDP port 3478.</p>
<p>stunserver &ndash;mode full &ndash;primaryinterface 128.34.56.78 &ndash;altinterface 128.34.56.79 : Above example starts a dual-host STUN service on the the interfaces identified by the IP address "128.34.56.78" and "128.34.56.79". There are four UDP socket listeners</p>
<pre class="fragment">128.34.56.78:3478 (Primary IP, Primary Port)
128.34.56.78:3479 (Primary IP, Alternate Port)
128.34.56.79:3478 (Primary IP, Primary Port)
128.34.56.79:3479 (Alternate IP, Alternate Port)
</pre><p>An error occurs if the addresses specified do not exist on the local host running the service.</p>
<p>stunserver &ndash;mode full &ndash;primaryinterface eth0 &ndash;altinterface eth1 : Same as above, except the interfaces are specified by their names as enumerated by the system. The "ifconfig" or "ipconfig" command will enumerate available interface names.</p>
<h1>AUTHOR</h1>
<p>john selbie (<a href="#" onclick="location.href='mai'+'lto:'+'joh'+'n@'+'sel'+'bi'+'e.c'+'om'; return false;">john@<span style="display: none;">.nosp@m.</span>selb<span style="display: none;">.nosp@m.</span>ie.co<span style="display: none;">.nosp@m.</span>m</a>) </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
